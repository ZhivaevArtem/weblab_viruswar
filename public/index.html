<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #fld {
            /*border: 1px solid black;*/
            padding: 0;
            border-spacing: 0;
            border-top: 1px solid black;
            border-left: 1px solid black;
        }
        #fld tr {
            padding: 0;
            margin: 0;
        }
        #fld tr td {
            border-right: 1px solid black;
            border-bottom: 1px solid black;
            border-collapse: collapse;
            height: 50px;
            width: 50px;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<!--<canvas id="ctx" width="500" height="500" style="border: 1px solid black;"></canvas>-->
<table id="fld">
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>
<hr>
<button id="btn"></button>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.dev.js"></script>
<script>
    let btn = document.getElementById('btn');
    let table = document.getElementById('fld').firstElementChild.children;
    let field = [];
    table.childNodes
    let socket = io();

    socket.on('connect', function () {
    });

    for (let i = 0; i < 10; i++) {
        field[i] = [];
        let row = table[i].children;
        for (let j = 0; j < 10; j++) {
            field[i][j] = row[j];
            field[i][j].onclick = function () {
                socket.emit('turn', {x: j, y: i});
            }
        }
    }
    socket.on('redraw', function (data) {
        for (let i = 0; i < 10; i++) {
            for (let j = 0; j < 10; j++) {
                switch (data.field[i][j]) {
                    case 'X':
                        field[i][j].textContent = 'X';
                        break;
                    case 'O':
                        field[i][j].textContent = 'O';
                        break;
                    default:
                        field[i][j].textContent = '';
                }
            }
        }
    });

    socket.on('init', function (data) {
        switch (data.activePlayers) {
            case 0:
                btn.textContent = 'Start new game';
                btn.onclick = function () {
                    socket.emit('new_game', {});
                };
                break;
            case 1:
                btn.textContent = 'Connect to game';
                btn.onclick = function () {
                    socket.emit('connect_game', {});
                };
                break;
            default:
                btn.hidden = true;
                break;
        }
    });
</script>
</html>